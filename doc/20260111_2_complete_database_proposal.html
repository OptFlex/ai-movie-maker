<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>çµµã‚³ãƒ³ãƒ†ã‚¢ãƒ—ãƒª - å®Œå…¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆææ¡ˆ</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1e3a8a 0%, #7c3aed 100%);
      padding: 40px 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1600px;
      margin: 0 auto;
    }

    h1 {
      color: white;
      text-align: center;
      font-size: 2.8rem;
      margin-bottom: 10px;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
    }

    .subtitle {
      color: rgba(255,255,255,0.95);
      text-align: center;
      margin-bottom: 20px;
      font-size: 1.2rem;
    }

    .version-info {
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 15px 30px;
      text-align: center;
      color: white;
      margin-bottom: 40px;
      border: 2px solid rgba(255,255,255,0.3);
    }

    .version-info strong {
      color: #fbbf24;
      font-size: 1.1rem;
    }

    /* ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ */
    .tabs {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .tab-button {
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(10px);
      color: white;
      border: 2px solid rgba(255,255,255,0.3);
      padding: 15px 30px;
      border-radius: 12px;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: 600;
      transition: all 0.3s;
    }

    .tab-button:hover {
      background: rgba(255,255,255,0.3);
      transform: translateY(-2px);
    }

    .tab-button.active {
      background: white;
      color: #1e3a8a;
      border-color: white;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* ã‚«ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ« */
    .card {
      background: white;
      border-radius: 20px;
      padding: 40px;
      margin-bottom: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }

    .card-title {
      font-size: 2rem;
      color: #1f2937;
      margin-bottom: 25px;
      text-align: center;
      border-bottom: 4px solid #7c3aed;
      padding-bottom: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }

    .card-title .emoji {
      font-size: 2.5rem;
    }

    /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒã‚¸ */
    .status-badge {
      display: inline-block;
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 700;
      margin-left: 10px;
    }

    .status-done {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
    }

    .status-next {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      color: white;
    }

    /* ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ */
    .table-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
      gap: 30px;
      margin-top: 30px;
    }

    .table-card {
      background: white;
      border: 3px solid #e5e7eb;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      transition: all 0.3s;
    }

    .table-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 30px rgba(0,0,0,0.15);
    }

    .table-card.implemented {
      border-color: #10b981;
    }

    .table-card.planned {
      border-color: #f59e0b;
    }

    .table-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 25px;
      font-size: 1.4rem;
      font-weight: 700;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .table-card.implemented .table-header {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }

    .table-card.planned .table-header {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    }

    .table-icon {
      font-size: 1.6rem;
      margin-right: 10px;
    }

    .table-body {
      padding: 0;
    }

    .column-row {
      display: grid;
      grid-template-columns: 40% 20% 40%;
      padding: 14px 25px;
      border-bottom: 1px solid #e5e7eb;
      font-size: 0.95rem;
      transition: background 0.2s;
      gap: 10px;
    }

    .column-row:hover {
      background: #f9fafb;
    }

    .column-row:last-child {
      border-bottom: none;
    }

    .column-row.header {
      background: #f3f4f6;
      font-weight: 700;
      color: #374151;
      position: sticky;
      top: 0;
    }

    .column-name {
      font-weight: 600;
      color: #1f2937;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 0.9rem;
    }

    .column-type {
      color: #6366f1;
      font-family: 'Monaco', 'Courier New', monospace;
      font-weight: 600;
      font-size: 0.85rem;
    }

    .column-desc {
      color: #6b7280;
      font-size: 0.9rem;
    }

    .pk-badge {
      background: #fbbf24;
      color: #78350f;
      padding: 2px 8px;
      border-radius: 6px;
      font-size: 0.7rem;
      font-weight: 700;
      margin-left: 6px;
    }

    .fk-badge {
      background: #60a5fa;
      color: #1e3a8a;
      padding: 2px 8px;
      border-radius: 6px;
      font-size: 0.7rem;
      font-weight: 700;
      margin-left: 6px;
    }

    /* SQLè¡¨ç¤º */
    .sql-block {
      background: #1f2937;
      color: #e5e7eb;
      padding: 25px;
      border-radius: 12px;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 0.9rem;
      line-height: 1.8;
      overflow-x: auto;
      margin: 20px 0;
      border-left: 5px solid #7c3aed;
    }

    .sql-keyword {
      color: #f59e0b;
      font-weight: 700;
    }

    .sql-type {
      color: #60a5fa;
    }

    .sql-string {
      color: #10b981;
    }

    .sql-comment {
      color: #9ca3af;
      font-style: italic;
    }

    /* ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ‰‹é † */
    .migration-step {
      background: #f9fafb;
      border-left: 5px solid #7c3aed;
      padding: 20px 25px;
      margin-bottom: 20px;
      border-radius: 8px;
    }

    .migration-step-number {
      background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%);
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1.2rem;
      margin-right: 15px;
    }

    .migration-step-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
    }

    .migration-step-desc {
      color: #6b7280;
      line-height: 1.8;
      margin-left: 55px;
    }

    /* ERå›³ */
    .er-diagram {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 25px;
      padding: 30px;
      background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);
      border-radius: 20px;
      margin: 30px 0;
    }

    .er-relation {
      text-align: center;
      padding: 15px 0;
      color: #4b5563;
      font-weight: 700;
      position: relative;
      font-size: 1.1rem;
    }

    .er-relation::before {
      content: '';
      position: absolute;
      left: 50%;
      top: -15px;
      bottom: -15px;
      width: 4px;
      background: linear-gradient(to bottom, transparent 0%, #9ca3af 20%, #9ca3af 80%, transparent 100%);
      transform: translateX(-50%);
    }

    .er-relation-label {
      background: white;
      padding: 10px 25px;
      border: 3px solid #7c3aed;
      border-radius: 25px;
      display: inline-block;
      position: relative;
      z-index: 1;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    /* ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ */
    .flow-container {
      display: grid;
      gap: 20px;
      margin-top: 30px;
    }

    .flow-step {
      display: flex;
      align-items: flex-start;
      gap: 20px;
      padding: 25px;
      background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
      border-radius: 16px;
      border-left: 6px solid #7c3aed;
      transition: all 0.3s;
    }

    .flow-step:hover {
      transform: translateX(10px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
    }

    .flow-number {
      background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%);
      color: white;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      font-weight: 700;
      flex-shrink: 0;
      box-shadow: 0 4px 12px rgba(124, 58, 237, 0.4);
    }

    .flow-content {
      flex: 1;
    }

    .flow-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 8px;
    }

    .flow-desc {
      color: #6b7280;
      line-height: 1.8;
      font-size: 1rem;
    }

    .flow-desc code {
      background: #e5e7eb;
      padding: 3px 10px;
      border-radius: 6px;
      font-family: 'Monaco', monospace;
      color: #1f2937;
      font-size: 0.9rem;
    }

    /* ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£èª¬æ˜ */
    .security-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      margin-top: 30px;
    }

    .security-item {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      padding: 25px;
      border-radius: 16px;
      border: 3px solid #f59e0b;
    }

    .security-item.high {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      border-color: #10b981;
    }

    .security-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .security-desc {
      color: #374151;
      line-height: 1.7;
    }

    /* ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ */
    .checklist {
      margin-top: 30px;
    }

    .checklist-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 18px 25px;
      border-radius: 12px;
      margin-bottom: 12px;
      transition: all 0.3s;
      border: 2px solid transparent;
    }

    .checklist-item:hover {
      transform: translateX(5px);
      border-color: #7c3aed;
    }

    .checklist-item.done {
      background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
    }

    .checklist-item.todo {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    }

    .checkbox {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      flex-shrink: 0;
      font-weight: 700;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }

    .checkbox.done {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
    }

    .checkbox.todo {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      color: white;
    }

    .checklist-text {
      flex: 1;
      font-size: 1.1rem;
      color: #1f2937;
      font-weight: 500;
    }

    /* ã‚¤ãƒ³ãƒ•ã‚©ãƒœãƒƒã‚¯ã‚¹ */
    .info-box {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      border: 3px solid #3b82f6;
      border-radius: 16px;
      padding: 25px;
      margin: 25px 0;
    }

    .info-box-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: #1e3a8a;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .info-box-content {
      color: #1e40af;
      line-height: 1.8;
      font-size: 1rem;
    }

    /* æ¯”è¼ƒè¡¨ */
    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 25px 0;
      font-size: 1rem;
    }

    .comparison-table th {
      background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%);
      color: white;
      padding: 18px;
      text-align: left;
      font-weight: 700;
      font-size: 1.1rem;
    }

    .comparison-table td {
      padding: 18px;
      border-bottom: 2px solid #e5e7eb;
    }

    .comparison-table tr:hover {
      background: #f9fafb;
    }

    .comparison-table code {
      background: #e5e7eb;
      padding: 3px 10px;
      border-radius: 6px;
      font-family: 'Monaco', monospace;
      color: #1f2937;
      font-size: 0.9rem;
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 2rem;
      }

      .table-grid {
        grid-template-columns: 1fr;
      }

      .column-row {
        grid-template-columns: 1fr;
        gap: 8px;
      }

      .tabs {
        flex-direction: column;
      }

      .tab-button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¬ çµµã‚³ãƒ³ãƒ†ã‚¢ãƒ—ãƒª å®Œå…¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆææ¡ˆ</h1>
    <p class="subtitle">å®Ÿè£…æ¸ˆã¿ + ã“ã‚Œã‹ã‚‰ä½œã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã®å…¨ä½“åƒ</p>

    <div class="version-info">
      <strong>ğŸ“… 2026å¹´1æœˆ11æ—¥ç‰ˆ</strong> - ç¾çŠ¶åˆ†æã¨æ¬¡ã‚¹ãƒ†ãƒƒãƒ—ã®å®Œå…¨ã‚¬ã‚¤ãƒ‰
    </div>

    <!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <div class="tabs">
      <button class="tab-button active" onclick="showTab('overview')">ğŸ“Š å…¨ä½“åƒ</button>
      <button class="tab-button" onclick="showTab('current')">âœ… å®Ÿè£…æ¸ˆã¿</button>
      <button class="tab-button" onclick="showTab('next')">ğŸš€ æ¬¡ã®å®Ÿè£…</button>
      <button class="tab-button" onclick="showTab('migration')">ğŸ“ å®Ÿè£…æ‰‹é †</button>
      <button class="tab-button" onclick="showTab('security')">ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</button>
    </div>

    <!-- ã‚¿ãƒ–1: å…¨ä½“åƒ -->
    <div id="overview" class="tab-content active">
      <div class="card">
        <h2 class="card-title">
          <span class="emoji">ğŸ—ºï¸</span>
          ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å…¨ä½“æ§‹é€ 
        </h2>

        <div class="er-diagram">
          <!-- èªè¨¼å±¤ -->
          <div class="table-card implemented" style="max-width: 600px;">
            <div class="table-header">
              <span><span class="table-icon">ğŸ”</span> auth.users</span>
              <span class="status-badge status-done">å®Ÿè£…æ¸ˆã¿</span>
            </div>
            <div class="table-body">
              <div class="column-row header">
                <div>ã‚«ãƒ©ãƒ å</div>
                <div>å‹</div>
                <div>èª¬æ˜</div>
              </div>
              <div class="column-row">
                <div class="column-name">id <span class="pk-badge">PK</span></div>
                <div class="column-type">UUID</div>
                <div class="column-desc">ãƒ¦ãƒ¼ã‚¶ãƒ¼ID</div>
              </div>
              <div class="column-row">
                <div class="column-name">email</div>
                <div class="column-type">TEXT</div>
                <div class="column-desc">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</div>
              </div>
            </div>
          </div>

          <div class="er-relation">
            <span class="er-relation-label">â†“ 1ãƒ¦ãƒ¼ã‚¶ãƒ¼ : è¤‡æ•°ä¼ç”» (1:N)</span>
          </div>

          <!-- ä¼ç”»å±¤ -->
          <div class="table-card planned" style="max-width: 600px;">
            <div class="table-header">
              <span><span class="table-icon">ğŸ“‹</span> projects</span>
              <span class="status-badge status-next">æ¬¡ã®å®Ÿè£…</span>
            </div>
            <div class="table-body">
              <div class="column-row header">
                <div>ã‚«ãƒ©ãƒ å</div>
                <div>å‹</div>
                <div>èª¬æ˜</div>
              </div>
              <div class="column-row">
                <div class="column-name">id <span class="pk-badge">PK</span></div>
                <div class="column-type">UUID</div>
                <div class="column-desc">ä¼ç”»ID</div>
              </div>
              <div class="column-row">
                <div class="column-name">user_id <span class="fk-badge">FK</span></div>
                <div class="column-type">UUID</div>
                <div class="column-desc">ä½œæˆè€…</div>
              </div>
              <div class="column-row">
                <div class="column-name">title</div>
                <div class="column-type">TEXT</div>
                <div class="column-desc">ä¼ç”»ã‚¿ã‚¤ãƒˆãƒ«</div>
              </div>
              <div class="column-row">
                <div class="column-name">channel_name</div>
                <div class="column-type">TEXT</div>
                <div class="column-desc">ãƒãƒ£ãƒ³ãƒãƒ«å</div>
              </div>
              <div class="column-row">
                <div class="column-name">goal</div>
                <div class="column-type">TEXT</div>
                <div class="column-desc">ç›®æ¨™ (GPS)</div>
              </div>
              <div class="column-row">
                <div class="column-name">plan</div>
                <div class="column-type">TEXT</div>
                <div class="column-desc">è¨ˆç”» (GPS)</div>
              </div>
              <div class="column-row">
                <div class="column-name">status</div>
                <div class="column-type">TEXT</div>
                <div class="column-desc">é€²æ— (GPS)</div>
              </div>
            </div>
          </div>

          <div class="er-relation">
            <span class="er-relation-label">â†“ 1ä¼ç”» : è¤‡æ•°ã‚·ãƒ¼ãƒ³ (1:N)</span>
          </div>

          <!-- ã‚·ãƒ¼ãƒ³å±¤ -->
          <div class="table-card planned" style="max-width: 600px;">
            <div class="table-header">
              <span><span class="table-icon">ğŸï¸</span> scenes</span>
              <span class="status-badge status-next">æ¬¡ã®å®Ÿè£…</span>
            </div>
            <div class="table-body">
              <div class="column-row header">
                <div>ã‚«ãƒ©ãƒ å</div>
                <div>å‹</div>
                <div>èª¬æ˜</div>
              </div>
              <div class="column-row">
                <div class="column-name">id <span class="pk-badge">PK</span></div>
                <div class="column-type">UUID</div>
                <div class="column-desc">ã‚·ãƒ¼ãƒ³ID</div>
              </div>
              <div class="column-row">
                <div class="column-name">project_id <span class="fk-badge">FK</span></div>
                <div class="column-type">UUID</div>
                <div class="column-desc">æ‰€å±ä¼ç”»</div>
              </div>
              <div class="column-row">
                <div class="column-name">number</div>
                <div class="column-type">INTEGER</div>
                <div class="column-desc">ã‚·ãƒ¼ãƒ³ç•ªå·</div>
              </div>
            </div>
          </div>

          <div class="er-relation">
            <span class="er-relation-label">â†“ 1ã‚·ãƒ¼ãƒ³ : è¤‡æ•°ã‚»ãƒªãƒ•ãƒ»ç”»åƒ (1:N)</span>
          </div>

          <!-- ã‚»ãƒªãƒ•ãƒ»ç”»åƒå±¤ -->
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; width: 100%; max-width: 1200px;">
            <div class="table-card planned">
              <div class="table-header">
                <span><span class="table-icon">ğŸ’¬</span> dialogues</span>
                <span class="status-badge status-next">æ¬¡ã®å®Ÿè£…</span>
              </div>
              <div class="table-body">
                <div class="column-row header">
                  <div>ã‚«ãƒ©ãƒ å</div>
                  <div>å‹</div>
                  <div>èª¬æ˜</div>
                </div>
                <div class="column-row">
                  <div class="column-name">id <span class="pk-badge">PK</span></div>
                  <div class="column-type">UUID</div>
                  <div class="column-desc">ã‚»ãƒªãƒ•ID</div>
                </div>
                <div class="column-row">
                  <div class="column-name">scene_id <span class="fk-badge">FK</span></div>
                  <div class="column-type">UUID</div>
                  <div class="column-desc">æ‰€å±ã‚·ãƒ¼ãƒ³</div>
                </div>
                <div class="column-row">
                  <div class="column-name">speaker</div>
                  <div class="column-type">TEXT</div>
                  <div class="column-desc">è©±è€…å</div>
                </div>
                <div class="column-row">
                  <div class="column-name">text</div>
                  <div class="column-type">TEXT</div>
                  <div class="column-desc">ã‚»ãƒªãƒ•å†…å®¹</div>
                </div>
                <div class="column-row">
                  <div class="column-name">order_index</div>
                  <div class="column-type">INTEGER</div>
                  <div class="column-desc">é †åº</div>
                </div>
              </div>
            </div>

            <div class="table-card planned">
              <div class="table-header">
                <span><span class="table-icon">ğŸ–¼ï¸</span> images</span>
                <span class="status-badge status-next">æ¬¡ã®å®Ÿè£…</span>
              </div>
              <div class="table-body">
                <div class="column-row header">
                  <div>ã‚«ãƒ©ãƒ å</div>
                  <div>å‹</div>
                  <div>èª¬æ˜</div>
                </div>
                <div class="column-row">
                  <div class="column-name">id <span class="pk-badge">PK</span></div>
                  <div class="column-type">UUID</div>
                  <div class="column-desc">ç”»åƒID</div>
                </div>
                <div class="column-row">
                  <div class="column-name">scene_id <span class="fk-badge">FK</span></div>
                  <div class="column-type">UUID</div>
                  <div class="column-desc">æ‰€å±ã‚·ãƒ¼ãƒ³</div>
                </div>
                <div class="column-row">
                  <div class="column-name">prompt</div>
                  <div class="column-type">TEXT</div>
                  <div class="column-desc">ç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</div>
                </div>
                <div class="column-row">
                  <div class="column-name">image_url</div>
                  <div class="column-type">TEXT</div>
                  <div class="column-desc">ç”»åƒURL</div>
                </div>
                <div class="column-row">
                  <div class="column-name">selected</div>
                  <div class="column-type">BOOLEAN</div>
                  <div class="column-desc">æ¡ç”¨ãƒ•ãƒ©ã‚°</div>
                </div>
              </div>
            </div>
          </div>

          <!-- ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆï¼ˆåˆ¥ç³»çµ±ï¼‰ -->
          <div style="margin-top: 50px; padding-top: 40px; border-top: 4px dashed #9ca3af; width: 100%;">
            <h3 style="text-align: center; color: #4b5563; margin-bottom: 25px; font-size: 1.4rem;">ğŸ”’ ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡</h3>
            <div class="table-card implemented" style="max-width: 600px; margin: 0 auto;">
              <div class="table-header">
                <span><span class="table-icon">âœ…</span> allowed_emails</span>
                <span class="status-badge status-done">å®Ÿè£…æ¸ˆã¿</span>
              </div>
              <div class="table-body">
                <div class="column-row header">
                  <div>ã‚«ãƒ©ãƒ å</div>
                  <div>å‹</div>
                  <div>èª¬æ˜</div>
                </div>
                <div class="column-row">
                  <div class="column-name">email <span class="pk-badge">PK</span></div>
                  <div class="column-type">TEXT</div>
                  <div class="column-desc">è¨±å¯ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</div>
                </div>
                <div class="column-row">
                  <div class="column-name">name</div>
                  <div class="column-type">TEXT</div>
                  <div class="column-desc">ãƒ¦ãƒ¼ã‚¶ãƒ¼å</div>
                </div>
                <div class="column-row">
                  <div class="column-name">added_at</div>
                  <div class="column-type">TIMESTAMPTZ</div>
                  <div class="column-desc">è¿½åŠ æ—¥æ™‚</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="info-box">
          <div class="info-box-title">ğŸ’¡ è¨­è¨ˆã®ãƒã‚¤ãƒ³ãƒˆ</div>
          <div class="info-box-content">
            <strong>éšå±¤æ§‹é€ :</strong> ãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ ä¼ç”» â†’ ã‚·ãƒ¼ãƒ³ â†’ (ã‚»ãƒªãƒ• + ç”»åƒ) ã®4éšå±¤è¨­è¨ˆ<br>
            <strong>ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰å‰Šé™¤:</strong> ä¸Šä½éšå±¤ã‚’å‰Šé™¤ã™ã‚‹ã¨ä¸‹ä½ã‚‚è‡ªå‹•å‰Šé™¤ï¼ˆãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã‚’ä¿è¨¼ï¼‰<br>
            <strong>RLS:</strong> å„ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¡Œãƒ¬ãƒ™ãƒ«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’è¨­å®šã—ã€è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½<br>
            <strong>ä¸€æ„åˆ¶ç´„:</strong> 1ã‚·ãƒ¼ãƒ³ã«æ¡ç”¨ç”»åƒã¯1ã¤ã¾ã§ï¼ˆUNIQUEåˆ¶ç´„ï¼‰
          </div>
        </div>
      </div>
    </div>

    <!-- ã‚¿ãƒ–2: å®Ÿè£…æ¸ˆã¿ -->
    <div id="current" class="tab-content">
      <div class="card">
        <h2 class="card-title">
          <span class="emoji">âœ…</span>
          ç¾åœ¨å®Ÿè£…æ¸ˆã¿ã®æ©Ÿèƒ½
        </h2>

        <div class="info-box">
          <div class="info-box-title">ğŸ“Œ ç¾çŠ¶ã‚µãƒãƒªãƒ¼</div>
          <div class="info-box-content">
            èªè¨¼åŸºç›¤ã¨APIé€£æºã¯å®Œæˆã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ãƒ¡ãƒ¢ãƒªç®¡ç†ï¼ˆJavaScriptå¤‰æ•°ï¼‰ã§å‹•ä½œä¸­ã€‚<br>
            æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å®Ÿè£…ã—ã€æ°¸ç¶šåŒ–ã‚’å®Ÿç¾ã—ã¾ã™ã€‚
          </div>
        </div>

        <h3 style="font-size: 1.5rem; margin: 30px 0 20px; color: #1f2937;">ğŸ” èªè¨¼ãƒ»ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡</h3>

        <div class="table-grid">
          <div class="table-card implemented">
            <div class="table-header">
              <span><span class="table-icon">ğŸ”</span> auth.users</span>
              <span class="status-badge status-done">Supabaseæ¨™æº–</span>
            </div>
            <div class="table-body">
              <div class="column-row header">
                <div>ã‚«ãƒ©ãƒ å</div>
                <div>å‹</div>
                <div>èª¬æ˜</div>
              </div>
              <div class="column-row">
                <div class="column-name">id <span class="pk-badge">PK</span></div>
                <div class="column-type">UUID</div>
                <div class="column-desc">ãƒ¦ãƒ¼ã‚¶ãƒ¼ID</div>
              </div>
              <div class="column-row">
                <div class="column-name">email</div>
                <div class="column-type">TEXT</div>
                <div class="column-desc">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</div>
              </div>
              <div class="column-row">
                <div class="column-name">created_at</div>
                <div class="column-type">TIMESTAMPTZ</div>
                <div class="column-desc">ç™»éŒ²æ—¥æ™‚</div>
              </div>
            </div>
          </div>

          <div class="table-card implemented">
            <div class="table-header">
              <span><span class="table-icon">âœ…</span> allowed_emails</span>
              <span class="status-badge status-done">å®Ÿè£…æ¸ˆã¿</span>
            </div>
            <div class="table-body">
              <div class="column-row header">
                <div>ã‚«ãƒ©ãƒ å</div>
                <div>å‹</div>
                <div>èª¬æ˜</div>
              </div>
              <div class="column-row">
                <div class="column-name">email <span class="pk-badge">PK</span></div>
                <div class="column-type">TEXT</div>
                <div class="column-desc">è¨±å¯ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</div>
              </div>
              <div class="column-row">
                <div class="column-name">name</div>
                <div class="column-type">TEXT</div>
                <div class="column-desc">ãƒ¦ãƒ¼ã‚¶ãƒ¼å</div>
              </div>
              <div class="column-row">
                <div class="column-name">added_at</div>
                <div class="column-type">TIMESTAMPTZ</div>
                <div class="column-desc">è¿½åŠ æ—¥æ™‚</div>
              </div>
              <div class="column-row">
                <div class="column-name">notes</div>
                <div class="column-type">TEXT</div>
                <div class="column-desc">ãƒ¡ãƒ¢</div>
              </div>
            </div>
          </div>
        </div>

        <h3 style="font-size: 1.5rem; margin: 40px 0 20px; color: #1f2937;">ğŸš€ Edge Functionsï¼ˆAPIé€£æºï¼‰</h3>

        <div class="flow-container">
          <div class="flow-step">
            <div class="flow-number">1</div>
            <div class="flow-content">
              <div class="flow-title">generate-image</div>
              <div class="flow-desc">
                <strong>æ©Ÿèƒ½:</strong> Gemini 3 Pro Image APIã‚’ä½¿ç”¨ã—ãŸç”»åƒç”Ÿæˆ<br>
                <strong>å…¥åŠ›:</strong> <code>prompt</code> (ãƒ†ã‚­ã‚¹ãƒˆ)<br>
                <strong>å‡ºåŠ›:</strong> Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸç”»åƒãƒ‡ãƒ¼ã‚¿
              </div>
            </div>
          </div>

          <div class="flow-step">
            <div class="flow-number">2</div>
            <div class="flow-content">
              <div class="flow-title">generate-video</div>
              <div class="flow-desc">
                <strong>æ©Ÿèƒ½:</strong> Google Veo 3.1ã‚’ä½¿ç”¨ã—ãŸå‹•ç”»ç”Ÿæˆ<br>
                <strong>å…¥åŠ›:</strong> <code>prompt</code>, <code>imageBase64</code>, <code>modelType</code><br>
                <strong>å‡ºåŠ›:</strong> operation.nameï¼ˆé•·æ™‚é–“å®Ÿè¡Œãƒˆãƒ¼ã‚¯ãƒ³ï¼‰
              </div>
            </div>
          </div>

          <div class="flow-step">
            <div class="flow-number">3</div>
            <div class="flow-content">
              <div class="flow-title">check-video-status</div>
              <div class="flow-desc">
                <strong>æ©Ÿèƒ½:</strong> Veo 3.1ã®å‹•ç”»ç”Ÿæˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª<br>
                <strong>å…¥åŠ›:</strong> <code>operationName</code><br>
                <strong>å‡ºåŠ›:</strong> é€²æ—çŠ¶æ³ãƒ»å®Œäº†æ™‚ã¯å‹•ç”»ãƒ‡ãƒ¼ã‚¿
              </div>
            </div>
          </div>
        </div>

        <div class="sql-block">
<span class="sql-comment">-- RLSãƒãƒªã‚·ãƒ¼ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰</span>
<span class="sql-keyword">ALTER TABLE</span> allowed_emails <span class="sql-keyword">ENABLE ROW LEVEL SECURITY</span>;

<span class="sql-keyword">CREATE POLICY</span> <span class="sql-string">"Anyone can read allowed_emails"</span>
  <span class="sql-keyword">ON</span> allowed_emails
  <span class="sql-keyword">FOR SELECT</span>
  <span class="sql-keyword">USING</span> (<span class="sql-keyword">true</span>);
        </div>
      </div>
    </div>

    <!-- ã‚¿ãƒ–3: æ¬¡ã®å®Ÿè£… -->
    <div id="next" class="tab-content">
      <div class="card">
        <h2 class="card-title">
          <span class="emoji">ğŸš€</span>
          æ¬¡ã«å®Ÿè£…ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«
        </h2>

        <div class="info-box">
          <div class="info-box-title">ğŸ¯ å®Ÿè£…å„ªå…ˆé †ä½</div>
          <div class="info-box-content">
            <strong>Step 1:</strong> projects ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆä¼ç”»ç®¡ç†ã®åŸºç›¤ï¼‰<br>
            <strong>Step 2:</strong> scenes ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆã‚·ãƒ¼ãƒ³ç®¡ç†ï¼‰<br>
            <strong>Step 3:</strong> dialogues + images ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆåŒæ™‚å®Ÿè£…å¯èƒ½ï¼‰<br>
            <strong>Step 4:</strong> Supabase Storageè¨­å®š + ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é€£æº
          </div>
        </div>

        <h3 style="font-size: 1.6rem; margin: 30px 0 20px; color: #1f2937;">ğŸ“‹ 1. projects ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆä¼ç”»ç®¡ç†ï¼‰</h3>

        <div class="sql-block">
<span class="sql-keyword">CREATE TABLE</span> projects (
  id <span class="sql-type">UUID</span> <span class="sql-keyword">PRIMARY KEY DEFAULT</span> gen_random_uuid(),
  user_id <span class="sql-type">UUID</span> <span class="sql-keyword">REFERENCES</span> auth.users(id) <span class="sql-keyword">ON DELETE CASCADE</span>,
  title <span class="sql-type">TEXT</span> <span class="sql-keyword">NOT NULL DEFAULT</span> <span class="sql-string">'ç„¡é¡Œã®ä¼ç”»'</span>,
  channel_name <span class="sql-type">TEXT</span>,
  thumbnail_url <span class="sql-type">TEXT</span>,
  goal <span class="sql-type">TEXT</span>,              <span class="sql-comment">-- GPS ã® G (Goal)</span>
  plan <span class="sql-type">TEXT</span>,              <span class="sql-comment">-- GPS ã® P (Plan)</span>
  status <span class="sql-type">TEXT</span>,            <span class="sql-comment">-- GPS ã® S (Status)</span>
  created_at <span class="sql-type">TIMESTAMPTZ</span> <span class="sql-keyword">DEFAULT</span> NOW(),
  updated_at <span class="sql-type">TIMESTAMPTZ</span> <span class="sql-keyword">DEFAULT</span> NOW()
);

<span class="sql-comment">-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ</span>
<span class="sql-keyword">CREATE INDEX</span> idx_projects_user_id_created
  <span class="sql-keyword">ON</span> projects(user_id, created_at <span class="sql-keyword">DESC</span>);

<span class="sql-comment">-- RLSè¨­å®š</span>
<span class="sql-keyword">ALTER TABLE</span> projects <span class="sql-keyword">ENABLE ROW LEVEL SECURITY</span>;

<span class="sql-keyword">CREATE POLICY</span> <span class="sql-string">"Users can CRUD their own projects"</span>
  <span class="sql-keyword">ON</span> projects
  <span class="sql-keyword">USING</span> (auth.uid() = user_id)
  <span class="sql-keyword">WITH CHECK</span> (auth.uid() = user_id);
        </div>

        <h3 style="font-size: 1.6rem; margin: 40px 0 20px; color: #1f2937;">ğŸï¸ 2. scenes ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆã‚·ãƒ¼ãƒ³ç®¡ç†ï¼‰</h3>

        <div class="sql-block">
<span class="sql-keyword">CREATE TABLE</span> scenes (
  id <span class="sql-type">UUID</span> <span class="sql-keyword">PRIMARY KEY DEFAULT</span> gen_random_uuid(),
  project_id <span class="sql-type">UUID</span> <span class="sql-keyword">REFERENCES</span> projects(id) <span class="sql-keyword">ON DELETE CASCADE</span>,
  number <span class="sql-type">INTEGER</span> <span class="sql-keyword">NOT NULL</span>,
  created_at <span class="sql-type">TIMESTAMPTZ</span> <span class="sql-keyword">DEFAULT</span> NOW(),
  updated_at <span class="sql-type">TIMESTAMPTZ</span> <span class="sql-keyword">DEFAULT</span> NOW(),
  <span class="sql-keyword">CONSTRAINT</span> unique_scene_number <span class="sql-keyword">UNIQUE</span> (project_id, number)
);

<span class="sql-comment">-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ</span>
<span class="sql-keyword">CREATE INDEX</span> idx_scenes_project_number
  <span class="sql-keyword">ON</span> scenes(project_id, number);

<span class="sql-comment">-- RLSè¨­å®š</span>
<span class="sql-keyword">ALTER TABLE</span> scenes <span class="sql-keyword">ENABLE ROW LEVEL SECURITY</span>;

<span class="sql-keyword">CREATE POLICY</span> <span class="sql-string">"Users can CRUD scenes in their projects"</span>
  <span class="sql-keyword">ON</span> scenes
  <span class="sql-keyword">USING</span> (
    <span class="sql-keyword">EXISTS</span> (
      <span class="sql-keyword">SELECT</span> 1 <span class="sql-keyword">FROM</span> projects
      <span class="sql-keyword">WHERE</span> projects.id = scenes.project_id
      <span class="sql-keyword">AND</span> projects.user_id = auth.uid()
    )
  )
  <span class="sql-keyword">WITH CHECK</span> (
    <span class="sql-keyword">EXISTS</span> (
      <span class="sql-keyword">SELECT</span> 1 <span class="sql-keyword">FROM</span> projects
      <span class="sql-keyword">WHERE</span> projects.id = scenes.project_id
      <span class="sql-keyword">AND</span> projects.user_id = auth.uid()
    )
  );
        </div>

        <h3 style="font-size: 1.6rem; margin: 40px 0 20px; color: #1f2937;">ğŸ’¬ 3. dialogues ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆã‚»ãƒªãƒ•ï¼‰</h3>

        <div class="sql-block">
<span class="sql-keyword">CREATE TABLE</span> dialogues (
  id <span class="sql-type">UUID</span> <span class="sql-keyword">PRIMARY KEY DEFAULT</span> gen_random_uuid(),
  scene_id <span class="sql-type">UUID</span> <span class="sql-keyword">REFERENCES</span> scenes(id) <span class="sql-keyword">ON DELETE CASCADE</span>,
  speaker <span class="sql-type">TEXT</span> <span class="sql-keyword">NOT NULL</span>,
  text <span class="sql-type">TEXT</span> <span class="sql-keyword">NOT NULL</span>,
  order_index <span class="sql-type">INTEGER</span> <span class="sql-keyword">NOT NULL</span>,
  created_at <span class="sql-type">TIMESTAMPTZ</span> <span class="sql-keyword">DEFAULT</span> NOW(),
  updated_at <span class="sql-type">TIMESTAMPTZ</span> <span class="sql-keyword">DEFAULT</span> NOW()
);

<span class="sql-comment">-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ</span>
<span class="sql-keyword">CREATE INDEX</span> idx_dialogues_scene_order
  <span class="sql-keyword">ON</span> dialogues(scene_id, order_index);

<span class="sql-comment">-- RLSè¨­å®š</span>
<span class="sql-keyword">ALTER TABLE</span> dialogues <span class="sql-keyword">ENABLE ROW LEVEL SECURITY</span>;

<span class="sql-keyword">CREATE POLICY</span> <span class="sql-string">"Users can CRUD dialogues in their scenes"</span>
  <span class="sql-keyword">ON</span> dialogues
  <span class="sql-keyword">USING</span> (
    <span class="sql-keyword">EXISTS</span> (
      <span class="sql-keyword">SELECT</span> 1 <span class="sql-keyword">FROM</span> scenes
      <span class="sql-keyword">JOIN</span> projects <span class="sql-keyword">ON</span> projects.id = scenes.project_id
      <span class="sql-keyword">WHERE</span> scenes.id = dialogues.scene_id
      <span class="sql-keyword">AND</span> projects.user_id = auth.uid()
    )
  )
  <span class="sql-keyword">WITH CHECK</span> (
    <span class="sql-keyword">EXISTS</span> (
      <span class="sql-keyword">SELECT</span> 1 <span class="sql-keyword">FROM</span> scenes
      <span class="sql-keyword">JOIN</span> projects <span class="sql-keyword">ON</span> projects.id = scenes.project_id
      <span class="sql-keyword">WHERE</span> scenes.id = dialogues.scene_id
      <span class="sql-keyword">AND</span> projects.user_id = auth.uid()
    )
  );
        </div>

        <h3 style="font-size: 1.6rem; margin: 40px 0 20px; color: #1f2937;">ğŸ–¼ï¸ 4. images ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆç”»åƒå€™è£œï¼‰</h3>

        <div class="sql-block">
<span class="sql-keyword">CREATE TABLE</span> images (
  id <span class="sql-type">UUID</span> <span class="sql-keyword">PRIMARY KEY DEFAULT</span> gen_random_uuid(),
  scene_id <span class="sql-type">UUID</span> <span class="sql-keyword">REFERENCES</span> scenes(id) <span class="sql-keyword">ON DELETE CASCADE</span>,
  prompt <span class="sql-type">TEXT</span> <span class="sql-keyword">NOT NULL</span>,
  image_url <span class="sql-type">TEXT</span>,
  selected <span class="sql-type">BOOLEAN</span> <span class="sql-keyword">DEFAULT</span> <span class="sql-keyword">false</span>,
  created_at <span class="sql-type">TIMESTAMPTZ</span> <span class="sql-keyword">DEFAULT</span> NOW(),
  <span class="sql-keyword">CONSTRAINT</span> one_selected_per_scene <span class="sql-keyword">UNIQUE</span> (scene_id, selected)
    <span class="sql-keyword">WHERE</span> (selected = <span class="sql-keyword">true</span>)
);

<span class="sql-comment">-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ</span>
<span class="sql-keyword">CREATE INDEX</span> idx_images_scene_id
  <span class="sql-keyword">ON</span> images(scene_id);

<span class="sql-keyword">CREATE INDEX</span> idx_images_created
  <span class="sql-keyword">ON</span> images(scene_id, created_at <span class="sql-keyword">DESC</span>);

<span class="sql-comment">-- RLSè¨­å®š</span>
<span class="sql-keyword">ALTER TABLE</span> images <span class="sql-keyword">ENABLE ROW LEVEL SECURITY</span>;

<span class="sql-keyword">CREATE POLICY</span> <span class="sql-string">"Users can CRUD images in their scenes"</span>
  <span class="sql-keyword">ON</span> images
  <span class="sql-keyword">USING</span> (
    <span class="sql-keyword">EXISTS</span> (
      <span class="sql-keyword">SELECT</span> 1 <span class="sql-keyword">FROM</span> scenes
      <span class="sql-keyword">JOIN</span> projects <span class="sql-keyword">ON</span> projects.id = scenes.project_id
      <span class="sql-keyword">WHERE</span> scenes.id = images.scene_id
      <span class="sql-keyword">AND</span> projects.user_id = auth.uid()
    )
  )
  <span class="sql-keyword">WITH CHECK</span> (
    <span class="sql-keyword">EXISTS</span> (
      <span class="sql-keyword">SELECT</span> 1 <span class="sql-keyword">FROM</span> scenes
      <span class="sql-keyword">JOIN</span> projects <span class="sql-keyword">ON</span> projects.id = scenes.project_id
      <span class="sql-keyword">WHERE</span> scenes.id = images.scene_id
      <span class="sql-keyword">AND</span> projects.user_id = auth.uid()
    )
  );
        </div>

        <h3 style="font-size: 1.6rem; margin: 40px 0 20px; color: #1f2937;">ğŸ“¦ 5. Supabase Storage ãƒã‚±ãƒƒãƒˆ</h3>

        <div class="sql-block">
<span class="sql-comment">-- Storageãƒã‚±ãƒƒãƒˆä½œæˆï¼ˆç®¡ç†ç”»é¢ or SQLï¼‰</span>
<span class="sql-keyword">INSERT INTO</span> storage.buckets (id, name, public)
<span class="sql-keyword">VALUES</span> (<span class="sql-string">'storyboard-images'</span>, <span class="sql-string">'storyboard-images'</span>, <span class="sql-keyword">false</span>);

<span class="sql-comment">-- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ¨©é™</span>
<span class="sql-keyword">CREATE POLICY</span> <span class="sql-string">"Users can upload images for their scenes"</span>
  <span class="sql-keyword">ON</span> storage.objects <span class="sql-keyword">FOR INSERT</span>
  <span class="sql-keyword">WITH CHECK</span> (
    bucket_id = <span class="sql-string">'storyboard-images'</span> <span class="sql-keyword">AND</span>
    auth.uid()::<span class="sql-type">text</span> = (storage.foldername(name))[1]
  );

<span class="sql-comment">-- èª­ã¿å–ã‚Šæ¨©é™</span>
<span class="sql-keyword">CREATE POLICY</span> <span class="sql-string">"Users can read their own images"</span>
  <span class="sql-keyword">ON</span> storage.objects <span class="sql-keyword">FOR SELECT</span>
  <span class="sql-keyword">USING</span> (
    bucket_id = <span class="sql-string">'storyboard-images'</span> <span class="sql-keyword">AND</span>
    auth.uid()::<span class="sql-type">text</span> = (storage.foldername(name))[1]
  );

<span class="sql-comment">-- å‰Šé™¤æ¨©é™</span>
<span class="sql-keyword">CREATE POLICY</span> <span class="sql-string">"Users can delete their own images"</span>
  <span class="sql-keyword">ON</span> storage.objects <span class="sql-keyword">FOR DELETE</span>
  <span class="sql-keyword">USING</span> (
    bucket_id = <span class="sql-string">'storyboard-images'</span> <span class="sql-keyword">AND</span>
    auth.uid()::<span class="sql-type">text</span> = (storage.foldername(name))[1]
  );
        </div>
      </div>
    </div>

    <!-- ã‚¿ãƒ–4: å®Ÿè£…æ‰‹é † -->
    <div id="migration" class="tab-content">
      <div class="card">
        <h2 class="card-title">
          <span class="emoji">ğŸ“</span>
          å®Ÿè£…æ‰‹é †ï¼ˆãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
        </h2>

        <div class="info-box">
          <div class="info-box-title">ğŸ¯ æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ</div>
          <div class="info-box-content">
            Supabaseãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é †ç•ªã«ä½œæˆã—ã€æ®µéšçš„ã«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¿½åŠ ã—ã¾ã™ã€‚<br>
            å„ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã¯ <code>supabase/migrations/</code> ã«é…ç½®ã—ã¾ã™ã€‚
          </div>
        </div>

        <div class="migration-step">
          <div class="migration-step-title">
            <span class="migration-step-number">1</span>
            projects ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
          </div>
          <div class="migration-step-desc">
            <strong>ãƒ•ã‚¡ã‚¤ãƒ«å:</strong> <code>20260111000001_create_projects.sql</code><br>
            <strong>å†…å®¹:</strong> projects ãƒ†ãƒ¼ãƒ–ãƒ« + ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ + RLSãƒãƒªã‚·ãƒ¼<br>
            <strong>å®Ÿè¡Œ:</strong> <code>supabase db push</code> ã¾ãŸã¯ Supabase Dashboard
          </div>
        </div>

        <div class="migration-step">
          <div class="migration-step-title">
            <span class="migration-step-number">2</span>
            scenes ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
          </div>
          <div class="migration-step-desc">
            <strong>ãƒ•ã‚¡ã‚¤ãƒ«å:</strong> <code>20260111000002_create_scenes.sql</code><br>
            <strong>å†…å®¹:</strong> scenes ãƒ†ãƒ¼ãƒ–ãƒ« + ä¸€æ„åˆ¶ç´„ + ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ + RLSãƒãƒªã‚·ãƒ¼<br>
            <strong>ä¾å­˜:</strong> projects ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå¿…é ˆï¼ˆå¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ï¼‰
          </div>
        </div>

        <div class="migration-step">
          <div class="migration-step-title">
            <span class="migration-step-number">3</span>
            dialogues ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
          </div>
          <div class="migration-step-desc">
            <strong>ãƒ•ã‚¡ã‚¤ãƒ«å:</strong> <code>20260111000003_create_dialogues.sql</code><br>
            <strong>å†…å®¹:</strong> dialogues ãƒ†ãƒ¼ãƒ–ãƒ« + ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ + RLSãƒãƒªã‚·ãƒ¼<br>
            <strong>ä¾å­˜:</strong> scenes ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå¿…é ˆ
          </div>
        </div>

        <div class="migration-step">
          <div class="migration-step-title">
            <span class="migration-step-number">4</span>
            images ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
          </div>
          <div class="migration-step-desc">
            <strong>ãƒ•ã‚¡ã‚¤ãƒ«å:</strong> <code>20260111000004_create_images.sql</code><br>
            <strong>å†…å®¹:</strong> images ãƒ†ãƒ¼ãƒ–ãƒ« + ä¸€æ„åˆ¶ç´„ + ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ + RLSãƒãƒªã‚·ãƒ¼<br>
            <strong>ä¾å­˜:</strong> scenes ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå¿…é ˆ
          </div>
        </div>

        <div class="migration-step">
          <div class="migration-step-title">
            <span class="migration-step-number">5</span>
            Storage ãƒã‚±ãƒƒãƒˆè¨­å®š
          </div>
          <div class="migration-step-desc">
            <strong>æ–¹æ³•1:</strong> Supabase Dashboard â†’ Storage â†’ New Bucket<br>
            <strong>æ–¹æ³•2:</strong> SQL (<code>INSERT INTO storage.buckets</code>)<br>
            <strong>è¨­å®š:</strong> ãƒã‚±ãƒƒãƒˆå <code>storyboard-images</code>, Public = false
          </div>
        </div>

        <div class="migration-step">
          <div class="migration-step-title">
            <span class="migration-step-number">6</span>
            Storage RLSãƒãƒªã‚·ãƒ¼è¨­å®š
          </div>
          <div class="migration-step-desc">
            <strong>ãƒ•ã‚¡ã‚¤ãƒ«å:</strong> <code>20260111000005_create_storage_policies.sql</code><br>
            <strong>å†…å®¹:</strong> INSERT/SELECT/DELETE ãƒãƒªã‚·ãƒ¼ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼IDãƒ™ãƒ¼ã‚¹ï¼‰
          </div>
        </div>

        <div class="migration-step">
          <div class="migration-step-title">
            <span class="migration-step-number">7</span>
            ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é€£æºå®Ÿè£…
          </div>
          <div class="migration-step-desc">
            <strong>å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«:</strong> <code>storyboard.html</code>, <code>projects.html</code><br>
            <strong>å¤‰æ›´å†…å®¹:</strong> ãƒ¡ãƒ¢ãƒªç®¡ç† â†’ Supabaseã‚¯ã‚¨ãƒªã«ç½®ãæ›ãˆ<br>
            <strong>æ©Ÿèƒ½:</strong> CRUDæ“ä½œã€ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
          </div>
        </div>

        <div class="migration-step">
          <div class="migration-step-title">
            <span class="migration-step-number">8</span>
            ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼
          </div>
          <div class="migration-step-desc">
            <strong>ç¢ºèªé …ç›®:</strong> RLSãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹ã€ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰å‰Šé™¤ãŒæ©Ÿèƒ½ã™ã‚‹ã‹<br>
            <strong>ãƒ†ã‚¹ãƒˆ:</strong> è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å‹•ä½œç¢ºèªã€æ¨©é™ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªã„ã‹æ¤œè¨¼
          </div>
        </div>

        <h3 style="font-size: 1.5rem; margin: 40px 0 20px; color: #1f2937;">ğŸ“‹ å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ä¾‹</h3>

        <div class="sql-block">
<span class="sql-comment"># æ–°è¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ</span>
supabase migration new create_projects

<span class="sql-comment"># ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰</span>
supabase db reset

<span class="sql-comment"># ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œï¼ˆæœ¬ç•ªï¼‰</span>
supabase db push

<span class="sql-comment"># ç¾åœ¨ã®ã‚¹ã‚­ãƒ¼ãƒç¢ºèª</span>
supabase db diff
        </div>
      </div>
    </div>

    <!-- ã‚¿ãƒ–5: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ -->
    <div id="security" class="tab-content">
      <div class="card">
        <h2 class="card-title">
          <span class="emoji">ğŸ”’</span>
          ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ
        </h2>

        <div class="security-grid">
          <div class="security-item high">
            <div class="security-title">ğŸ” èªè¨¼ï¼ˆAuthï¼‰</div>
            <div class="security-desc">
              Supabase Auth + Google OAuthã§å®‰å…¨ãªèªè¨¼ã‚’å®Ÿç¾ã€‚<br>
              ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç®¡ç†ä¸è¦ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã¯è‡ªå‹•ã€‚
            </div>
          </div>

          <div class="security-item high">
            <div class="security-title">âœ… ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆ</div>
            <div class="security-desc">
              allowed_emailsãƒ†ãƒ¼ãƒ–ãƒ«ã§è¨±å¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’åˆ¶é™ã€‚<br>
              æœªç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªå‹•ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã€‚
            </div>
          </div>

          <div class="security-item high">
            <div class="security-title">ğŸ›¡ï¸ RLSï¼ˆè¡Œãƒ¬ãƒ™ãƒ«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼‰</div>
            <div class="security-desc">
              å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã§RLSæœ‰åŠ¹åŒ–ã€‚<br>
              ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã€‚
            </div>
          </div>

          <div class="security-item high">
            <div class="security-title">ğŸ”— ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰å‰Šé™¤</div>
            <div class="security-desc">
              ON DELETE CASCADEã§è‡ªå‹•å‰Šé™¤ã€‚<br>
              å­¤ç«‹ãƒ‡ãƒ¼ã‚¿ã‚’é˜²ãã€æ•´åˆæ€§ã‚’ä¿è¨¼ã€‚
            </div>
          </div>

          <div class="security-item">
            <div class="security-title">ğŸ“¦ Storageæ¨©é™</div>
            <div class="security-desc">
              ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãƒ™ãƒ¼ã‚¹ã®ãƒ‘ã‚¹åˆ¶å¾¡ã€‚<br>
              ä»–äººã®ç”»åƒã¯èª­ã¿å–ã‚Šãƒ»å‰Šé™¤ä¸å¯ã€‚
            </div>
          </div>

          <div class="security-item">
            <div class="security-title">ğŸ”‘ API Keyç®¡ç†</div>
            <div class="security-desc">
              Edge Functionã§API Keyã‚’éš è”½ã€‚<br>
              ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«æ©Ÿå¯†æƒ…å ±ã‚’éœ²å‡ºã—ãªã„ã€‚
            </div>
          </div>
        </div>

        <h3 style="font-size: 1.5rem; margin: 40px 0 20px; color: #1f2937;">ğŸ” RLSãƒãƒªã‚·ãƒ¼ã®ä»•çµ„ã¿</h3>

        <table class="comparison-table">
          <thead>
            <tr>
              <th>ãƒ†ãƒ¼ãƒ–ãƒ«</th>
              <th>ãƒãƒªã‚·ãƒ¼å†…å®¹</th>
              <th>åŠ¹æœ</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>projects</code></td>
              <td><code>auth.uid() = user_id</code></td>
              <td>è‡ªåˆ†ãŒä½œæˆã—ãŸä¼ç”»ã®ã¿æ“ä½œå¯èƒ½</td>
            </tr>
            <tr>
              <td><code>scenes</code></td>
              <td><code>EXISTS (SELECT 1 FROM projects WHERE ...)</code></td>
              <td>è‡ªåˆ†ã®ä¼ç”»ã®ã‚·ãƒ¼ãƒ³ã®ã¿æ“ä½œå¯èƒ½</td>
            </tr>
            <tr>
              <td><code>dialogues</code></td>
              <td><code>EXISTS (SELECT 1 FROM scenes JOIN projects WHERE ...)</code></td>
              <td>è‡ªåˆ†ã®ä¼ç”»ã®ã‚·ãƒ¼ãƒ³ã®ã‚»ãƒªãƒ•ã®ã¿æ“ä½œå¯èƒ½</td>
            </tr>
            <tr>
              <td><code>images</code></td>
              <td><code>EXISTS (SELECT 1 FROM scenes JOIN projects WHERE ...)</code></td>
              <td>è‡ªåˆ†ã®ä¼ç”»ã®ã‚·ãƒ¼ãƒ³ã®ç”»åƒã®ã¿æ“ä½œå¯èƒ½</td>
            </tr>
          </tbody>
        </table>

        <div class="info-box">
          <div class="info-box-title">ğŸ’¡ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãƒã‚¤ãƒ³ãƒˆ</div>
          <div class="info-box-content">
            <strong>å¤šå±¤é˜²å¾¡:</strong> èªè¨¼ â†’ ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆ â†’ RLS ã®3æ®µéšã§ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡<br>
            <strong>æœ€å°æ¨©é™:</strong> å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¿…è¦æœ€å°é™ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½<br>
            <strong>é€éçš„:</strong> ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã›ãšã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å¼·åŒ–<br>
            <strong>ç›£æŸ»å¯èƒ½:</strong> RLSãƒãƒªã‚·ãƒ¼ã¯SQLã§æ˜ç¤ºçš„ã«è¨˜è¿°ã•ã‚Œã€ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯èƒ½
          </div>
        </div>
      </div>
    </div>

    <!-- æœ€çµ‚ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ -->
    <div class="card">
      <h2 class="card-title">
        <span class="emoji">âœ“</span>
        å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
      </h2>

      <div class="checklist">
        <div class="checklist-item done">
          <div class="checkbox done">âœ“</div>
          <div class="checklist-text">allowed_emails ãƒ†ãƒ¼ãƒ–ãƒ« + RLSãƒãƒªã‚·ãƒ¼</div>
        </div>

        <div class="checklist-item done">
          <div class="checkbox done">âœ“</div>
          <div class="checklist-text">Google OAuthèªè¨¼ã®å®Ÿè£…</div>
        </div>

        <div class="checklist-item done">
          <div class="checkbox done">âœ“</div>
          <div class="checklist-text">Edge Functionï¼ˆGeminiãƒ»Veo APIé€£æºï¼‰</div>
        </div>

        <div class="checklist-item done">
          <div class="checkbox done">âœ“</div>
          <div class="checklist-text">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ¢ãƒƒã‚¯UIä½œæˆ</div>
        </div>

        <div class="checklist-item todo">
          <div class="checkbox todo">â—¯</div>
          <div class="checklist-text">projects ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ + RLSãƒãƒªã‚·ãƒ¼</div>
        </div>

        <div class="checklist-item todo">
          <div class="checkbox todo">â—¯</div>
          <div class="checklist-text">scenes ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ + ä¸€æ„åˆ¶ç´„ + RLSãƒãƒªã‚·ãƒ¼</div>
        </div>

        <div class="checklist-item todo">
          <div class="checkbox todo">â—¯</div>
          <div class="checklist-text">dialogues ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ + RLSãƒãƒªã‚·ãƒ¼</div>
        </div>

        <div class="checklist-item todo">
          <div class="checkbox todo">â—¯</div>
          <div class="checklist-text">images ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ + ä¸€æ„åˆ¶ç´„ + RLSãƒãƒªã‚·ãƒ¼</div>
        </div>

        <div class="checklist-item todo">
          <div class="checkbox todo">â—¯</div>
          <div class="checklist-text">Supabase Storage ãƒã‚±ãƒƒãƒˆä½œæˆï¼ˆstoryboard-imagesï¼‰</div>
        </div>

        <div class="checklist-item todo">
          <div class="checkbox todo">â—¯</div>
          <div class="checklist-text">Storage RLSãƒãƒªã‚·ãƒ¼è¨­å®šï¼ˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»èª­ã¿å–ã‚Šãƒ»å‰Šé™¤ï¼‰</div>
        </div>

        <div class="checklist-item todo">
          <div class="checkbox todo">â—¯</div>
          <div class="checklist-text">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ â† â†’ Supabaseé€£æºå®Ÿè£…ï¼ˆCRUDæ“ä½œï¼‰</div>
        </div>

        <div class="checklist-item todo">
          <div class="checkbox todo">â—¯</div>
          <div class="checklist-text">ç”»åƒã®Base64 â†’ Storageä¿å­˜å‡¦ç†</div>
        </div>

        <div class="checklist-item todo">
          <div class="checkbox todo">â—¯</div>
          <div class="checklist-text">å‹•ç”»ç”Ÿæˆã®é•·æ™‚é–“å®Ÿè¡Œãƒãƒ¼ãƒªãƒ³ã‚°å‡¦ç†</div>
        </div>

        <div class="checklist-item todo">
          <div class="checkbox todo">â—¯</div>
          <div class="checklist-text">è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã®ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼</div>
        </div>
      </div>
    </div>

  </div>

  <script>
    function showTab(tabName) {
      // ã™ã¹ã¦ã®ã‚¿ãƒ–ã‚’éè¡¨ç¤º
      const contents = document.querySelectorAll('.tab-content');
      contents.forEach(content => content.classList.remove('active'));

      // ã™ã¹ã¦ã®ãƒœã‚¿ãƒ³ã® active ã‚’å‰Šé™¤
      const buttons = document.querySelectorAll('.tab-button');
      buttons.forEach(button => button.classList.remove('active'));

      // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã‚’è¡¨ç¤º
      document.getElementById(tabName).classList.add('active');

      // é¸æŠã•ã‚ŒãŸãƒœã‚¿ãƒ³ã« active ã‚’è¿½åŠ 
      event.target.classList.add('active');
    }
  </script>
</body>
</html>