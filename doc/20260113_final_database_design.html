<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>çµµã‚³ãƒ³ãƒ†ã‚¢ãƒ—ãƒª - æœ€çµ‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼ˆ2026/01/13ï¼‰</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #f5f5f5;
      padding: 0;
      line-height: 1.6;
      min-width: 1400px;
    }

    .header {
      background: linear-gradient(135deg, #1e3a8a 0%, #7c3aed 100%);
      color: white;
      padding: 50px 60px;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    }

    .header h1 {
      font-size: 3.5rem;
      margin-bottom: 15px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }

    .header .subtitle {
      font-size: 1.4rem;
      opacity: 0.95;
      margin-bottom: 20px;
    }

    .header .date {
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(10px);
      display: inline-block;
      padding: 12px 30px;
      border-radius: 30px;
      font-weight: 600;
      border: 2px solid rgba(255,255,255,0.3);
      font-size: 1.1rem;
    }

    .container {
      max-width: 2300px;
      margin: 0 auto;
      padding: 50px 60px;
    }

    .section {
      background: white;
      border-radius: 20px;
      padding: 40px;
      margin-bottom: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    .section h2 {
      font-size: 2rem;
      margin-bottom: 25px;
      color: #1e3a8a;
      border-bottom: 3px solid #7c3aed;
      padding-bottom: 10px;
    }

    .section h3 {
      font-size: 1.5rem;
      margin-top: 30px;
      margin-bottom: 15px;
      color: #7c3aed;
    }

    /* ãƒ†ãƒ¼ãƒ–ãƒ«æ¨ªä¸¦ã³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
    .tables-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 30px;
      margin-bottom: 40px;
    }

    .table-card {
      background: white;
      border: 3px solid #7c3aed;
      border-radius: 16px;
      padding: 25px;
      box-shadow: 0 4px 15px rgba(124, 58, 237, 0.15);
    }

    .table-card h3 {
      margin: 0 0 20px 0;
      font-size: 1.4rem;
      color: #7c3aed;
      border-bottom: 2px solid #e9d5ff;
      padding-bottom: 10px;
    }

    .field {
      padding: 10px;
      margin: 5px 0;
      background: #f9fafb;
      border-radius: 8px;
      font-size: 0.95rem;
      border-left: 4px solid #e9d5ff;
    }

    .field.pk {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border-left-color: #f59e0b;
      font-weight: 700;
    }

    .field.fk {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      border-left-color: #3b82f6;
      font-weight: 600;
    }

    .field .type {
      color: #7c3aed;
      font-weight: 600;
      margin-left: 8px;
    }

    .field .desc {
      display: block;
      font-size: 0.85rem;
      color: #6b7280;
      margin-top: 3px;
    }

    /* ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å›³ */
    .relations {
      background: linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%);
      border-radius: 16px;
      padding: 30px;
      margin: 30px 0;
    }

    .relations h3 {
      color: #5b21b6;
      margin-top: 0;
    }

    .relation-item {
      background: white;
      padding: 15px 20px;
      margin: 10px 0;
      border-radius: 10px;
      border-left: 5px solid #7c3aed;
      font-size: 1.05rem;
    }

    .relation-item strong {
      color: #7c3aed;
    }

    /* CSV ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½ */
    .feature-box {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      border: 3px solid #10b981;
      border-radius: 16px;
      padding: 30px;
      margin: 30px 0;
    }

    .feature-box h3 {
      color: #047857;
      margin-top: 0;
    }

    .code-block {
      background: #1e293b;
      color: #e2e8f0;
      padding: 20px;
      border-radius: 10px;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      overflow-x: auto;
      margin: 15px 0;
    }

    .code-block .comment {
      color: #94a3b8;
    }

    .highlight {
      background: #fef3c7;
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 600;
    }

    .note {
      background: #fef3c7;
      border-left: 5px solid #f59e0b;
      padding: 15px 20px;
      border-radius: 8px;
      margin: 20px 0;
    }

    .note strong {
      color: #d97706;
    }

    ul {
      margin-left: 25px;
      margin-top: 10px;
    }

    li {
      margin: 8px 0;
      font-size: 1.05rem;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>çµµã‚³ãƒ³ãƒ†ã‚¢ãƒ—ãƒª - æœ€çµ‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ</h1>
    <p class="subtitle">Supabase (PostgreSQL) + Storage + Auth</p>
    <div class="date">2026å¹´1æœˆ13æ—¥ æ›´æ–°</div>
  </div>

  <div class="container">

    <!-- æ¦‚è¦ -->
    <div class="section">
      <h2>ğŸ“‹ è¨­è¨ˆæ¦‚è¦</h2>
      <p style="font-size: 1.1rem; line-height: 1.8;">
        ã“ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã¯ã€<strong>storyboard.html</strong>ã§å®Ÿè£…ã•ã‚ŒãŸä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ï¼š
      </p>
      <ul>
        <li><strong>ã‚·ãƒ¼ãƒ³ç®¡ç†</strong>: ã‚«ãƒƒãƒˆç•ªå·ã€ã‚·ãƒ¼ãƒ³èª¬æ˜ã€ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒ</li>
        <li><strong>ç”»åƒç”Ÿæˆå±¥æ­´</strong>: ãƒˆãƒ¼ã‚¯å½¢å¼UIã§è¡¨ç¤ºã•ã‚Œã‚‹ç”Ÿæˆç”»åƒã¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</li>
        <li><strong>å‚ç…§ç”»åƒ</strong>: æœ€å¤§14æšã®å‚ç…§ç”»åƒã‚’JSONBé…åˆ—ã§ä¿å­˜ï¼ˆå†ç¾æ€§ç¢ºä¿ï¼‰</li>
        <li><strong>å‹•ç”»ç”Ÿæˆ</strong>: ã‚·ãƒ¼ãƒ³ã‹ã‚‰å‹•ç”»ã‚’ç”Ÿæˆã—ã€Storage URLã§ä¿å­˜</li>
        <li><strong>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†</strong>: è¤‡æ•°ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆçµµã‚³ãƒ³ãƒ†ï¼‰ã‚’ç®¡ç†</li>
      </ul>

      <div class="note">
        <strong>ğŸ”‘ é‡è¦:</strong> ç”»åƒ/å‹•ç”»ã®å®Ÿãƒ‡ãƒ¼ã‚¿ã¯ <span class="highlight">Supabase Storage</span> ã«ä¿å­˜ã•ã‚Œã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã¯ <span class="highlight">Storage URL</span> ã®ã¿ã‚’ä¿å­˜ã—ã¾ã™ã€‚Base64ã¯ä¸€æ™‚çš„ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ã®ã¿ä½¿ç”¨ã—ã¾ã™ã€‚
      </div>
    </div>

    <!-- ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§ -->
    <div class="section">
      <h2>ğŸ—‚ï¸ ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆï¼ˆå…¨ä½“å›³ï¼‰</h2>

      <div class="tables-grid">

        <!-- Projects ãƒ†ãƒ¼ãƒ–ãƒ« -->
        <div class="table-card">
          <h3>ğŸ“ Projectsï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰</h3>
          <div class="field pk">
            <strong>id</strong> <span class="type">UUID</span>
            <span class="desc">PRIMARY KEY</span>
          </div>
          <div class="field fk">
            <strong>user_id</strong> <span class="type">UUID</span>
            <span class="desc">FK â†’ auth.users(id)</span>
          </div>
          <div class="field">
            <strong>title</strong> <span class="type">TEXT</span>
            <span class="desc">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå</span>
          </div>
          <div class="field">
            <strong>description</strong> <span class="type">TEXT</span>
            <span class="desc">èª¬æ˜ï¼ˆä»»æ„ï¼‰</span>
          </div>
          <div class="field">
            <strong>created_at</strong> <span class="type">TIMESTAMPTZ</span>
            <span class="desc">ä½œæˆæ—¥æ™‚</span>
          </div>
          <div class="field">
            <strong>updated_at</strong> <span class="type">TIMESTAMPTZ</span>
            <span class="desc">æ›´æ–°æ—¥æ™‚</span>
          </div>
        </div>

        <!-- Scenes ãƒ†ãƒ¼ãƒ–ãƒ« -->
        <div class="table-card">
          <h3>ğŸ¬ Scenesï¼ˆã‚·ãƒ¼ãƒ³ï¼‰</h3>
          <div class="field pk">
            <strong>id</strong> <span class="type">UUID</span>
            <span class="desc">PRIMARY KEY</span>
          </div>
          <div class="field fk">
            <strong>project_id</strong> <span class="type">UUID</span>
            <span class="desc">FK â†’ projects(id)</span>
          </div>
          <div class="field">
            <strong>scene_number</strong> <span class="type">INTEGER</span>
            <span class="desc">ã‚·ãƒ¼ãƒ³ç•ªå·ï¼ˆè¡¨ç¤ºé †ï¼‰</span>
          </div>
          <div class="field">
            <strong>cut_number</strong> <span class="type">TEXT</span>
            <span class="desc">ã‚«ãƒƒãƒˆç•ªå·ï¼ˆä¾‹: C-001ï¼‰</span>
          </div>
          <div class="field">
            <strong>description</strong> <span class="type">TEXT</span>
            <span class="desc">ã‚·ãƒ¼ãƒ³èª¬æ˜</span>
          </div>
          <div class="field">
            <strong>thumbnail_url</strong> <span class="type">TEXT</span>
            <span class="desc">ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒURLï¼ˆStorageï¼‰</span>
          </div>
          <div class="field">
            <strong>created_at</strong> <span class="type">TIMESTAMPTZ</span>
            <span class="desc">ä½œæˆæ—¥æ™‚</span>
          </div>
          <div class="field">
            <strong>updated_at</strong> <span class="type">TIMESTAMPTZ</span>
            <span class="desc">æ›´æ–°æ—¥æ™‚</span>
          </div>
        </div>

        <!-- Images ãƒ†ãƒ¼ãƒ–ãƒ« -->
        <div class="table-card">
          <h3>ğŸ–¼ï¸ Imagesï¼ˆç”Ÿæˆç”»åƒï¼‰</h3>
          <div class="field pk">
            <strong>id</strong> <span class="type">UUID</span>
            <span class="desc">PRIMARY KEY</span>
          </div>
          <div class="field fk">
            <strong>scene_id</strong> <span class="type">UUID</span>
            <span class="desc">FK â†’ scenes(id)</span>
          </div>
          <div class="field">
            <strong>prompt</strong> <span class="type">TEXT</span>
            <span class="desc">ç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</span>
          </div>
          <div class="field">
            <strong>image_url</strong> <span class="type">TEXT</span>
            <span class="desc">ç”Ÿæˆç”»åƒURLï¼ˆStorageï¼‰</span>
          </div>
          <div class="field">
            <strong>reference_images</strong> <span class="type">JSONB</span>
            <span class="desc">å‚ç…§ç”»åƒURLé…åˆ—</span>
          </div>
          <div class="field">
            <strong>is_selected</strong> <span class="type">BOOLEAN</span>
            <span class="desc">æ¡ç”¨ãƒ•ãƒ©ã‚°</span>
          </div>
          <div class="field">
            <strong>created_at</strong> <span class="type">TIMESTAMPTZ</span>
            <span class="desc">ç”Ÿæˆæ—¥æ™‚</span>
          </div>
        </div>

        <!-- Videos ãƒ†ãƒ¼ãƒ–ãƒ« -->
        <div class="table-card">
          <h3>ğŸ¥ Videosï¼ˆç”Ÿæˆå‹•ç”»ï¼‰</h3>
          <div class="field pk">
            <strong>id</strong> <span class="type">UUID</span>
            <span class="desc">PRIMARY KEY</span>
          </div>
          <div class="field fk">
            <strong>scene_id</strong> <span class="type">UUID</span>
            <span class="desc">FK â†’ scenes(id)</span>
          </div>
          <div class="field fk">
            <strong>base_image_id</strong> <span class="type">UUID</span>
            <span class="desc">FK â†’ images(id)ï¼ˆå…ƒç”»åƒï¼‰</span>
          </div>
          <div class="field">
            <strong>prompt</strong> <span class="type">TEXT</span>
            <span class="desc">å‹•ç”»ç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</span>
          </div>
          <div class="field">
            <strong>video_url</strong> <span class="type">TEXT</span>
            <span class="desc">å‹•ç”»URLï¼ˆStorageï¼‰</span>
          </div>
          <div class="field">
            <strong>duration</strong> <span class="type">INTEGER</span>
            <span class="desc">å‹•ç”»ã®é•·ã•ï¼ˆç§’ï¼‰</span>
          </div>
          <div class="field">
            <strong>is_selected</strong> <span class="type">BOOLEAN</span>
            <span class="desc">æ¡ç”¨ãƒ•ãƒ©ã‚°</span>
          </div>
          <div class="field">
            <strong>created_at</strong> <span class="type">TIMESTAMPTZ</span>
            <span class="desc">ç”Ÿæˆæ—¥æ™‚</span>
          </div>
        </div>

      </div>
    </div>

    <!-- ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <div class="section">
      <h2>ğŸ”— ãƒ†ãƒ¼ãƒ–ãƒ«ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>

      <div class="relations">
        <h3>ä¸»ã‚­ãƒ¼ãƒ»å¤–éƒ¨ã‚­ãƒ¼ã®é–¢ä¿‚</h3>

        <div class="relation-item">
          <strong>Projects â† Scenes</strong><br>
          1ã¤ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯è¤‡æ•°ã®ã‚·ãƒ¼ãƒ³ã‚’æŒã¤ï¼ˆ1:Nï¼‰<br>
          <code>scenes.project_id â†’ projects.id</code> (ON DELETE CASCADE)
        </div>

        <div class="relation-item">
          <strong>Scenes â† Images</strong><br>
          1ã¤ã®ã‚·ãƒ¼ãƒ³ã¯è¤‡æ•°ã®ç”Ÿæˆç”»åƒã‚’æŒã¤ï¼ˆ1:Nï¼‰<br>
          <code>images.scene_id â†’ scenes.id</code> (ON DELETE CASCADE)
        </div>

        <div class="relation-item">
          <strong>Scenes â† Videos</strong><br>
          1ã¤ã®ã‚·ãƒ¼ãƒ³ã¯è¤‡æ•°ã®ç”Ÿæˆå‹•ç”»ã‚’æŒã¤ï¼ˆ1:Nï¼‰<br>
          <code>videos.scene_id â†’ scenes.id</code> (ON DELETE CASCADE)
        </div>

        <div class="relation-item">
          <strong>Images â† Videos</strong><br>
          1ã¤ã®å‹•ç”»ã¯1ã¤ã®å…ƒç”»åƒã‚’å‚ç…§ï¼ˆN:1ï¼‰<br>
          <code>videos.base_image_id â†’ images.id</code> (ON DELETE SET NULL)
        </div>

        <div class="relation-item">
          <strong>auth.users â† Projects</strong><br>
          1äººã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è¤‡æ•°ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒã¤ï¼ˆ1:Nï¼‰<br>
          <code>projects.user_id â†’ auth.users.id</code> (ON DELETE CASCADE)
        </div>
      </div>
    </div>

    <!-- å‚ç…§ç”»åƒã®è¨­è¨ˆ -->
    <div class="section">
      <h2>ğŸ“· å‚ç…§ç”»åƒã®ä¿å­˜è¨­è¨ˆ</h2>

      <h3>Images.reference_imagesï¼ˆJSONBå‹ï¼‰</h3>
      <p style="font-size: 1.05rem; line-height: 1.8;">
        å‚ç…§ç”»åƒã¯ <span class="highlight">JSONBé…åˆ—</span> ã§ä¿å­˜ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šå†ç¾æ€§ãŒç¢ºä¿ã•ã‚Œã€å¾Œã‹ã‚‰ã€Œã©ã®å‚ç…§ç”»åƒã‚’ä½¿ã£ãŸã‹ã€ã‚’ç¢ºèªã§ãã¾ã™ã€‚
      </p>

      <div class="code-block">
{
  "id": "img-001",
  "scene_id": "scene-123",
  "prompt": "å¤•æš®ã‚Œã®è¡—ä¸¦ã¿ã‚’æã„ã¦ãã ã•ã„",
  "image_url": "https://xxx.supabase.co/storage/v1/object/public/images/generated-001.png",
  <strong>"reference_images": [
    "https://xxx.supabase.co/storage/v1/object/public/references/ref-001.jpg",
    "https://xxx.supabase.co/storage/v1/object/public/references/ref-002.jpg",
    "https://xxx.supabase.co/storage/v1/object/public/references/ref-003.jpg"
  ]</strong>,
  "is_selected": false,
  "created_at": "2026-01-13T10:00:00Z"
}
      </div>

      <div class="note">
        <strong>ğŸ’¡ è¨­è¨ˆã®ãƒã‚¤ãƒ³ãƒˆ:</strong>
        <ul>
          <li>å‚ç…§ç”»åƒã¯æœ€å¤§14æšï¼ˆGeminiã®åˆ¶é™ï¼‰</li>
          <li>ç”»åƒç”ŸæˆAPIã«é€ä¿¡ã™ã‚‹å‰ã«ã€å‚ç…§ç”»åƒã‚’Supabase Storageã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</li>
          <li>ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¾Œã®Storage URLã‚’é…åˆ—ã§ä¿å­˜</li>
          <li>ãƒˆãƒ¼ã‚¯å½¢å¼UIã§ã€ŒğŸ“· Ã—3ã€ã®ã‚ˆã†ã«å‚ç…§ç”»åƒæ•°ã‚’è¡¨ç¤º</li>
        </ul>
      </div>
    </div>

    <!-- CSVä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½ -->
    <div class="section">
      <h2>ğŸ“¥ CSVä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã®ææ¡ˆ</h2>

      <div class="feature-box">
        <h3>âœ¨ æ©Ÿèƒ½æ¦‚è¦</h3>
        <p style="font-size: 1.05rem; line-height: 1.8;">
          CSVãƒ•ã‚¡ã‚¤ãƒ«ã¾ãŸã¯ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã€<strong>ã‚·ãƒ¼ãƒ³æƒ…å ±ã‚’ä¸€æ‹¬ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</strong>ã§ãã‚‹æ©Ÿèƒ½ã§ã™ã€‚
          ã‚«ãƒƒãƒˆç•ªå·ï¼ˆä¾‹: C-001, C-002ï¼‰ã‚„ã‚·ãƒ¼ãƒ³èª¬æ˜ã‚’ä¸€æ°—ã«ç™»éŒ²ã§ãã¾ã™ã€‚
        </p>
      </div>

      <h3>CSVãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä¾‹</h3>
      <div class="code-block">
<span class="comment"># ã‚·ãƒ¼ãƒ³ä¸€æ‹¬ç™»éŒ²ç”¨CSV</span>
<strong>scene_number,cut_number,description</strong>
1,C-001,ä¸»äººå…¬ãŒæœã®è¡—ã‚’æ­©ã„ã¦ã„ã‚‹
2,C-002,ã‚«ãƒ•ã‚§ã«å…¥åº—ã€ã‚³ãƒ¼ãƒ’ãƒ¼ã‚’æ³¨æ–‡
3,C-003,çª“éš›ã®å¸­ã«åº§ã‚Šã€å¤–ã‚’çœºã‚ã‚‹
4,C-004,ã‚¹ãƒãƒ›ã«é€šçŸ¥ãŒå±Šã
5,C-005,é©šã„ãŸè¡¨æƒ…ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’èª­ã‚€
6,C-006,æ€¥ã„ã§åº—ã‚’å‡ºã‚‹
7,C-007,é§…ã«å‘ã‹ã£ã¦èµ°ã‚‹
8,C-008,é›»è»Šã«é£›ã³ä¹—ã‚‹
      </div>

      <h3>ã‚¤ãƒ³ãƒãƒ¼ãƒˆå‡¦ç†ãƒ•ãƒ­ãƒ¼</h3>
      <ul>
        <li><strong>1. CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</strong> â†’ ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ or ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—</li>
        <li><strong>2. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º</strong> â†’ ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã‚·ãƒ¼ãƒ³ä¸€è¦§ã‚’ç¢ºèª</li>
        <li><strong>3. ä¸€æ‹¬ç™»éŒ²å®Ÿè¡Œ</strong> â†’ Supabase Scenesãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¸€æ‹¬INSERT</li>
        <li><strong>4. è‡ªå‹•ã§ã‚«ãƒƒãƒˆç•ªå·ç”Ÿæˆ</strong> â†’ C-001, C-002... ã®ã‚ˆã†ã«é€£ç•ªã§è‡ªå‹•æ¡ç•ªã‚‚å¯èƒ½</li>
      </ul>

      <h3>å®Ÿè£…ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆstoryboard.html ã«è¿½åŠ ï¼‰</h3>
      <div class="code-block">
<span class="comment">// CSVèª­ã¿è¾¼ã¿é–¢æ•°</span>
function importScenesFromCSV(file) {
  const reader = new FileReader();
  reader.onload = function(e) {
    const csv = e.target.result;
    const lines = csv.split('\n');
    const scenes = [];

    <span class="comment">// 1è¡Œç›®ã¯ãƒ˜ãƒƒãƒ€ãƒ¼ãªã®ã§ã‚¹ã‚­ãƒƒãƒ—</span>
    for (let i = 1; i < lines.length; i++) {
      const [scene_number, cut_number, description] = lines[i].split(',');
      if (scene_number) {
        scenes.push({
          scene_number: parseInt(scene_number),
          cut_number: cut_number.trim(),
          description: description.trim(),
          project_id: currentProjectId,
          thumbnail_url: null
        });
      }
    }

    <span class="comment">// Supabaseã«ä¸€æ‹¬INSERT</span>
    supabase.from('scenes').insert(scenes).then(() => {
      alert(`${scenes.length}ä»¶ã®ã‚·ãƒ¼ãƒ³ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ`);
      loadScenes(); <span class="comment">// å†èª­ã¿è¾¼ã¿</span>
    });
  };
  reader.readAsText(file);
}
      </div>

      <div class="note">
        <strong>ğŸ¯ ã“ã®æ©Ÿèƒ½ã®ãƒ¡ãƒªãƒƒãƒˆ:</strong>
        <ul>
          <li>è„šæœ¬ã‚„ã‚·ãƒŠãƒªã‚ªã‹ã‚‰ä¸€æ°—ã«ã‚·ãƒ¼ãƒ³ã‚’ç™»éŒ²ã§ãã‚‹</li>
          <li>Excelã§ç·¨é›†ã—ãŸã‚·ãƒ¼ãƒ³ãƒªã‚¹ãƒˆã‚’ãã®ã¾ã¾ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯èƒ½</li>
          <li>æ‰‹ä½œæ¥­ã§1ã¤ãšã¤è¿½åŠ ã™ã‚‹æ‰‹é–“ãŒçœã‘ã‚‹</li>
          <li>å¤§é‡ã®ã‚·ãƒ¼ãƒ³ï¼ˆ50ã€œ100ã‚·ãƒ¼ãƒ³ï¼‰ã‚‚ä¸€ç¬ã§ç™»éŒ²</li>
        </ul>
      </div>
    </div>

    <!-- RLSè¨­è¨ˆ -->
    <div class="section">
      <h2>ğŸ”’ Row Level Security (RLS) è¨­è¨ˆ</h2>

      <h3>åŸºæœ¬æ–¹é‡</h3>
      <p style="font-size: 1.05rem; line-height: 1.8;">
        å…¨ã¦ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã§ <span class="highlight">RLSï¼ˆè¡Œãƒ¬ãƒ™ãƒ«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼‰</span> ã‚’æœ‰åŠ¹ã«ã—ã€
        <strong>ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½</strong> ã«ã—ã¾ã™ã€‚
      </p>

      <h3>RLSãƒãƒªã‚·ãƒ¼ä¾‹ï¼ˆProjects ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰</h3>
      <div class="code-block">
<span class="comment">-- è‡ªåˆ†ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã¿é–²è¦§å¯èƒ½</span>
CREATE POLICY "Users can view their own projects"
  ON projects FOR SELECT
  USING (auth.uid() = user_id);

<span class="comment">-- è‡ªåˆ†ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã¿ä½œæˆå¯èƒ½</span>
CREATE POLICY "Users can create their own projects"
  ON projects FOR INSERT
  WITH CHECK (auth.uid() = user_id);

<span class="comment">-- è‡ªåˆ†ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã¿æ›´æ–°å¯èƒ½</span>
CREATE POLICY "Users can update their own projects"
  ON projects FOR UPDATE
  USING (auth.uid() = user_id);

<span class="comment">-- è‡ªåˆ†ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã¿å‰Šé™¤å¯èƒ½</span>
CREATE POLICY "Users can delete their own projects"
  ON projects FOR DELETE
  USING (auth.uid() = user_id);
      </div>

      <h3>Scenes, Images, Videos ãƒ†ãƒ¼ãƒ–ãƒ«ã® RLS</h3>
      <p style="font-size: 1.05rem; line-height: 1.8;">
        ã“ã‚Œã‚‰ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ <code>project_id</code> ã¾ãŸã¯ <code>scene_id</code> ã‚’é€šã˜ã¦
        é–“æ¥çš„ã« <code>user_id</code> ã‚’å‚ç…§ã™ã‚‹ãŸã‚ã€JOINã‚’ä½¿ã£ãŸãƒãƒªã‚·ãƒ¼ãŒå¿…è¦ã§ã™ã€‚
      </p>

      <div class="code-block">
<span class="comment">-- Scenes: è‡ªåˆ†ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å±ã™ã‚‹ã‚·ãƒ¼ãƒ³ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½</span>
CREATE POLICY "Users can access scenes in their projects"
  ON scenes FOR ALL
  USING (
    EXISTS (
      SELECT 1 FROM projects
      WHERE projects.id = scenes.project_id
      AND projects.user_id = auth.uid()
    )
  );

<span class="comment">-- Images: è‡ªåˆ†ã®ã‚·ãƒ¼ãƒ³ã«å±ã™ã‚‹ç”»åƒã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½</span>
CREATE POLICY "Users can access images in their scenes"
  ON images FOR ALL
  USING (
    EXISTS (
      SELECT 1 FROM scenes
      JOIN projects ON projects.id = scenes.project_id
      WHERE scenes.id = images.scene_id
      AND projects.user_id = auth.uid()
    )
  );
      </div>
    </div>

    <!-- ã¾ã¨ã‚ -->
    <div class="section">
      <h2>âœ… å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—</h2>

      <h3>1. Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ</h3>
      <ul>
        <li>Supabase Dashboard ã§æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ</li>
        <li>èªè¨¼ï¼ˆAuthï¼‰ã‚’æœ‰åŠ¹åŒ–ï¼ˆEmail/Passwordã¾ãŸã¯ Google OAuthï¼‰</li>
      </ul>

      <h3>2. ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆï¼ˆSQLå®Ÿè¡Œï¼‰</h3>
      <ul>
        <li>ä¸Šè¨˜ã®ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆã‚’SQLæ–‡ã§ä½œæˆ</li>
        <li>å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã€CASCADEå‰Šé™¤ã‚’è¨­å®š</li>
        <li>RLSãƒãƒªã‚·ãƒ¼ã‚’è¨­å®š</li>
      </ul>

      <h3>3. Storage ãƒã‚±ãƒƒãƒˆä½œæˆ</h3>
      <ul>
        <li><strong>images</strong> ãƒã‚±ãƒƒãƒˆ: ç”Ÿæˆç”»åƒã‚’ä¿å­˜</li>
        <li><strong>references</strong> ãƒã‚±ãƒƒãƒˆ: å‚ç…§ç”»åƒã‚’ä¿å­˜</li>
        <li><strong>videos</strong> ãƒã‚±ãƒƒãƒˆ: ç”Ÿæˆå‹•ç”»ã‚’ä¿å­˜</li>
        <li><strong>thumbnails</strong> ãƒã‚±ãƒƒãƒˆ: ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã‚’ä¿å­˜</li>
      </ul>

      <h3>4. storyboard.html ã«Supabaseæ¥ç¶šã‚’è¿½åŠ </h3>
      <ul>
        <li>Supabase Client SDK ã‚’èª­ã¿è¾¼ã¿</li>
        <li>èªè¨¼çŠ¶æ…‹ã®ç®¡ç†ï¼ˆãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆï¼‰</li>
        <li>CRUDæ“ä½œï¼ˆCreate, Read, Update, Deleteï¼‰ã®å®Ÿè£…</li>
        <li>Storage ã¸ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã®å®Ÿè£…</li>
      </ul>

      <h3>5. CSVä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã®å®Ÿè£…ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰</h3>
      <ul>
        <li>ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰UIã®è¿½åŠ </li>
        <li>CSVè§£æå‡¦ç†ã®å®Ÿè£…</li>
        <li>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã¨ä¸€æ‹¬ç™»éŒ²å‡¦ç†</li>
      </ul>

      <div class="note">
        <strong>ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:</strong>
        ã“ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã«åŸºã¥ã„ã¦ã€Supabaseã®ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆSQLæ–‡ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚
        å®Ÿè£…ã‚’é–‹å§‹ã™ã‚‹æº–å‚™ãŒæ•´ã„ã¾ã—ãŸï¼
      </div>
    </div>

  </div>
</body>
</html>
